{"ast":null,"code":"var _jsxFileName = \"D:\\\\hoc\\\\chuyen de 1\\\\admin\\\\frontend\\\\admin-panel\\\\src\\\\pages\\\\PromotionManagement.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Box, Typography, Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Button, IconButton, Dialog, DialogActions, DialogContent, DialogTitle, TextField, MenuItem, Select, FormControl, InputLabel, Chip, FormHelperText, InputAdornment, Tab, Tabs, Checkbox, ListItemText } from '@mui/material';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport AddIcon from '@mui/icons-material/Add';\nimport PercentIcon from '@mui/icons-material/Percent';\nimport DateRangeIcon from '@mui/icons-material/DateRange';\nimport CategoryIcon from '@mui/icons-material/Category';\nimport InventoryIcon from '@mui/icons-material/Inventory';\nimport Layout from '../components/Layout';\nimport { getPromotions, createPromotion, updatePromotion, deletePromotion, getCategories, getProducts } from '../services/api';\nimport { useSnackbar } from 'notistack';\nimport { styled } from '@mui/material/styles';\nimport { useLocation } from 'react-router-dom';\n\n// Tạo các styled components thay thế cho Grid\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GridContainer = styled('div')(({\n  theme\n}) => ({\n  display: 'flex',\n  flexWrap: 'wrap',\n  width: '100%',\n  margin: '-8px'\n}));\n_c = GridContainer;\nconst GridItemHalf = styled('div')(({\n  theme\n}) => ({\n  padding: '8px',\n  boxSizing: 'border-box',\n  flex: '0 0 auto',\n  width: '100%',\n  [theme.breakpoints.up('sm')]: {\n    width: '50%'\n  }\n}));\n_c2 = GridItemHalf;\nfunction TabPanel(props) {\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `promotion-tabpanel-${index}`,\n    \"aria-labelledby\": `promotion-tab-${index}`,\n    ...other,\n    children: value === index && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_c3 = TabPanel;\nconst formatDate = dateString => {\n  const date = new Date(dateString);\n  return date.toLocaleString('vi-VN');\n};\nconst PromotionManagement = () => {\n  _s();\n  const location = useLocation();\n  const {\n    selectedProductId,\n    selectedCategoryId\n  } = location.state || {};\n  const [promotions, setPromotions] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [editingPromotion, setEditingPromotion] = useState(null);\n  const [tabValue, setTabValue] = useState(0);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    discount_percentage: '',\n    start_date: new Date().toISOString().slice(0, 16),\n    end_date: new Date(new Date().setMonth(new Date().getMonth() + 1)).toISOString().slice(0, 16),\n    img_banner: ''\n  });\n  const [selectedProductIds, setSelectedProductIds] = useState([]);\n  const [selectedCategoryIds, setSelectedCategoryIds] = useState([]);\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  useEffect(() => {\n    fetchPromotions();\n    fetchCategories();\n    fetchProducts();\n\n    // Nếu được mở từ trang sản phẩm hoặc danh mục, tự động mở dialog thêm mới\n    if (selectedProductId || selectedCategoryId) {\n      handleOpenDialog();\n    }\n  }, []);\n  useEffect(() => {\n    // Nếu được mở từ trang sản phẩm, tự động chọn sản phẩm đó\n    if (selectedProductId && products.length > 0) {\n      setSelectedProductIds([selectedProductId]);\n      setTabValue(1); // Chuyển đến tab sản phẩm\n    }\n\n    // Nếu được mở từ trang danh mục, tự động chọn danh mục đó\n    if (selectedCategoryId && categories.length > 0) {\n      setSelectedCategoryIds([selectedCategoryId]);\n      setTabValue(2); // Chuyển đến tab danh mục\n    }\n  }, [selectedProductId, selectedCategoryId, products, categories]);\n  const fetchPromotions = async () => {\n    try {\n      setLoading(true);\n      const response = await getPromotions();\n      setPromotions(response.data);\n    } catch (error) {\n      console.error('Không thể lấy dữ liệu khuyến mãi:', error);\n      enqueueSnackbar('Không thể lấy danh sách khuyến mãi', {\n        variant: 'error'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchCategories = async () => {\n    try {\n      const response = await getCategories();\n      setCategories(response.data);\n    } catch (error) {\n      console.error('Không thể lấy dữ liệu danh mục:', error);\n      enqueueSnackbar('Không thể lấy danh sách danh mục', {\n        variant: 'error'\n      });\n    }\n  };\n  const fetchProducts = async () => {\n    try {\n      const response = await getProducts();\n      setProducts(response.data);\n    } catch (error) {\n      console.error('Không thể lấy dữ liệu sản phẩm:', error);\n      enqueueSnackbar('Không thể lấy danh sách sản phẩm', {\n        variant: 'error'\n      });\n    }\n  };\n  const handleOpenDialog = promotion => {\n    if (promotion) {\n      setEditingPromotion(promotion);\n      setFormData({\n        title: promotion.title,\n        description: promotion.description || '',\n        discount_percentage: promotion.discount_percentage.toString(),\n        start_date: new Date(promotion.start_date).toISOString().slice(0, 16),\n        end_date: new Date(promotion.end_date).toISOString().slice(0, 16),\n        img_banner: promotion.img_banner || ''\n      });\n\n      // Trong thực tế, ta cần gọi API để lấy danh sách sản phẩm và danh mục\n      // được áp dụng khuyến mãi này, nhưng vì chưa có API đó, ta sẽ để trống\n      setSelectedProductIds([]);\n      setSelectedCategoryIds([]);\n    } else {\n      setEditingPromotion(null);\n      setFormData({\n        title: '',\n        description: '',\n        discount_percentage: '',\n        start_date: new Date().toISOString().slice(0, 16),\n        end_date: new Date(new Date().setMonth(new Date().getMonth() + 1)).toISOString().slice(0, 16),\n        img_banner: ''\n      });\n      setSelectedProductIds([]);\n      setSelectedCategoryIds([]);\n    }\n    setOpenDialog(true);\n    setTabValue(0);\n  };\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n    setEditingPromotion(null);\n  };\n  const handleTextFieldChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSelectChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleDateChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n  const handleProductSelectionChange = event => {\n    const {\n      value\n    } = event.target;\n    setSelectedProductIds(typeof value === 'string' ? [] : value);\n  };\n  const handleCategorySelectionChange = event => {\n    const {\n      value\n    } = event.target;\n    setSelectedCategoryIds(typeof value === 'string' ? [] : value);\n  };\n  const validateForm = () => {\n    if (!formData.title.trim()) {\n      enqueueSnackbar('Vui lòng nhập tiêu đề khuyến mãi', {\n        variant: 'error'\n      });\n      return false;\n    }\n    if (!formData.discount_percentage || isNaN(Number(formData.discount_percentage)) || Number(formData.discount_percentage) <= 0 || Number(formData.discount_percentage) > 100) {\n      enqueueSnackbar('Vui lòng nhập phần trăm giảm giá hợp lệ (1-100)', {\n        variant: 'error'\n      });\n      return false;\n    }\n    if (!formData.start_date || !formData.end_date) {\n      enqueueSnackbar('Vui lòng chọn ngày bắt đầu và kết thúc', {\n        variant: 'error'\n      });\n      return false;\n    }\n    if (new Date(formData.start_date) >= new Date(formData.end_date)) {\n      enqueueSnackbar('Ngày kết thúc phải sau ngày bắt đầu', {\n        variant: 'error'\n      });\n      return false;\n    }\n    return true;\n  };\n  const handleSubmit = async () => {\n    if (!validateForm()) return;\n    try {\n      const promotionData = {\n        title: formData.title,\n        description: formData.description || null,\n        discount_percentage: Number(formData.discount_percentage),\n        start_date: new Date(formData.start_date).toISOString(),\n        end_date: new Date(formData.end_date).toISOString(),\n        img_banner: formData.img_banner || null,\n        product_ids: selectedProductIds,\n        category_ids: selectedCategoryIds\n      };\n      if (editingPromotion) {\n        // Cập nhật khuyến mãi\n        await updatePromotion(editingPromotion.promotion_id, promotionData);\n        enqueueSnackbar('Cập nhật khuyến mãi thành công!', {\n          variant: 'success'\n        });\n      } else {\n        // Tạo khuyến mãi mới\n        await createPromotion(promotionData);\n        enqueueSnackbar('Tạo khuyến mãi mới thành công!', {\n          variant: 'success'\n        });\n      }\n      handleCloseDialog();\n      fetchPromotions();\n    } catch (error) {\n      console.error('Lỗi khi lưu khuyến mãi:', error);\n      if (error.response) {\n        console.error('Lỗi response:', error.response.data);\n        enqueueSnackbar(`Lỗi: ${JSON.stringify(error.response.data)}`, {\n          variant: 'error'\n        });\n      } else {\n        enqueueSnackbar('Lỗi khi lưu dữ liệu khuyến mãi', {\n          variant: 'error'\n        });\n      }\n    }\n  };\n  const handleDelete = async id => {\n    if (window.confirm('Bạn có chắc chắn muốn xóa khuyến mãi này?')) {\n      try {\n        await deletePromotion(id);\n        enqueueSnackbar('Xóa khuyến mãi thành công!', {\n          variant: 'success'\n        });\n        fetchPromotions();\n      } catch (error) {\n        console.error('Lỗi khi xóa khuyến mãi:', error);\n        enqueueSnackbar('Không thể xóa khuyến mãi', {\n          variant: 'error'\n        });\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          children: \"Qu\\u1EA3n l\\xFD Khuy\\u1EBFn m\\xE3i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 36\n          }, this),\n          onClick: () => handleOpenDialog(),\n          children: \"Th\\xEAm Khuy\\u1EBFn m\\xE3i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        component: Paper,\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Ti\\xEAu \\u0111\\u1EC1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Ph\\u1EA7n tr\\u0103m gi\\u1EA3m gi\\xE1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Ng\\xE0y k\\u1EBFt th\\xFAc\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Tr\\u1EA1ng th\\xE1i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"Thao t\\xE1c\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: loading ? /*#__PURE__*/_jsxDEV(TableRow, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                colSpan: 7,\n                align: \"center\",\n                children: \"\\u0110ang t\\u1EA3i...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 33\n            }, this) : promotions.length === 0 ? /*#__PURE__*/_jsxDEV(TableRow, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                colSpan: 7,\n                align: \"center\",\n                children: \"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 33\n            }, this) : promotions.map(promotion => {\n              const now = new Date();\n              const startDate = new Date(promotion.start_date);\n              const endDate = new Date(promotion.end_date);\n              let status = \"Chưa bắt đầu\";\n              let statusColor = \"info\";\n              if (now >= startDate && now <= endDate) {\n                status = \"Đang diễn ra\";\n                statusColor = \"success\";\n              } else if (now > endDate) {\n                status = \"Đã kết thúc\";\n                statusColor = \"error\";\n              }\n              return /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  children: promotion.promotion_id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: promotion.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: [promotion.discount_percentage, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: formatDate(promotion.start_date)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: formatDate(promotion.end_date)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(Chip, {\n                    label: status,\n                    color: statusColor,\n                    size: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 372,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"right\",\n                  children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                    onClick: () => handleOpenDialog(promotion),\n                    children: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 380,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                    onClick: () => handleDelete(promotion.promotion_id),\n                    children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 383,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 382,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 45\n                }, this)]\n              }, promotion.promotion_id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 41\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: openDialog,\n        onClose: handleCloseDialog,\n        maxWidth: \"md\",\n        fullWidth: true,\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          children: editingPromotion ? 'Sửa Khuyến mãi' : 'Thêm Khuyến mãi Mới'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            borderBottom: 1,\n            borderColor: 'divider'\n          },\n          children: /*#__PURE__*/_jsxDEV(Tabs, {\n            value: tabValue,\n            onChange: handleTabChange,\n            \"aria-label\": \"promotion edit tabs\",\n            children: [/*#__PURE__*/_jsxDEV(Tab, {\n              label: \"Th\\xF4ng tin c\\u01A1 b\\u1EA3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"S\\u1EA3n ph\\u1EA9m \\xE1p d\\u1EE5ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"Danh m\\u1EE5c \\xE1p d\\u1EE5ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          children: [/*#__PURE__*/_jsxDEV(TabPanel, {\n            value: tabValue,\n            index: 0,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                flexDirection: 'column',\n                gap: 2,\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ti\\xEAu \\u0111\\u1EC1 khuy\\u1EBFn m\\xE3i\",\n                name: \"title\",\n                value: formData.title,\n                onChange: handleTextFieldChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"M\\xF4 t\\u1EA3\",\n                name: \"description\",\n                value: formData.description,\n                onChange: handleTextFieldChange,\n                multiline: true,\n                rows: 4\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ph\\u1EA7n tr\\u0103m gi\\u1EA3m gi\\xE1\",\n                name: \"discount_percentage\",\n                value: formData.discount_percentage,\n                onChange: handleTextFieldChange,\n                type: \"number\",\n                InputProps: {\n                  startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                    position: \"start\",\n                    children: /*#__PURE__*/_jsxDEV(PercentIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 437,\n                      columnNumber: 90\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 437,\n                    columnNumber: 57\n                  }, this)\n                },\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(GridContainer, {\n                children: [/*#__PURE__*/_jsxDEV(GridItemHalf, {\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    fullWidth: true,\n                    label: \"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u\",\n                    name: \"start_date\",\n                    type: \"datetime-local\",\n                    value: formData.start_date,\n                    onChange: handleDateChange,\n                    InputLabelProps: {\n                      shrink: true\n                    },\n                    InputProps: {\n                      startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                        position: \"start\",\n                        children: /*#__PURE__*/_jsxDEV(DateRangeIcon, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 454,\n                          columnNumber: 98\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 454,\n                        columnNumber: 65\n                      }, this)\n                    },\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 443,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(GridItemHalf, {\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    fullWidth: true,\n                    label: \"Ng\\xE0y k\\u1EBFt th\\xFAc\",\n                    name: \"end_date\",\n                    type: \"datetime-local\",\n                    value: formData.end_date,\n                    onChange: handleDateChange,\n                    InputLabelProps: {\n                      shrink: true\n                    },\n                    InputProps: {\n                      startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                        position: \"start\",\n                        children: /*#__PURE__*/_jsxDEV(DateRangeIcon, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 471,\n                          columnNumber: 98\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 471,\n                        columnNumber: 65\n                      }, this)\n                    },\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 460,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"\\u1EA2nh banner (URL)\",\n                name: \"img_banner\",\n                value: formData.img_banner,\n                onChange: handleTextFieldChange,\n                placeholder: \"https://example.com/banner.jpg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n            value: tabValue,\n            index: 1,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle1\",\n                sx: {\n                  mb: 2,\n                  display: 'flex',\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsxDEV(InventoryIcon, {\n                  sx: {\n                    mr: 1\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 37\n                }, this), \"S\\u1EA3n ph\\u1EA9m \\xE1p d\\u1EE5ng khuy\\u1EBFn m\\xE3i\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  id: \"products-select-label\",\n                  children: \"S\\u1EA3n ph\\u1EA9m\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 496,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  labelId: \"products-select-label\",\n                  multiple: true,\n                  value: selectedProductIds,\n                  onChange: handleProductSelectionChange,\n                  renderValue: selected => /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: 'flex',\n                      flexWrap: 'wrap',\n                      gap: 0.5\n                    },\n                    children: selected.map(value => {\n                      const product = products.find(p => p.product_id === value);\n                      return /*#__PURE__*/_jsxDEV(Chip, {\n                        label: (product === null || product === void 0 ? void 0 : product.name) || value\n                      }, value, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 507,\n                        columnNumber: 57\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 503,\n                    columnNumber: 45\n                  }, this),\n                  children: products.map(product => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: product.product_id,\n                    children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                      checked: selectedProductIds.indexOf(product.product_id) > -1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 515,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: product.name,\n                      secondary: `${product.price.toLocaleString('vi-VN')}đ`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 516,\n                      columnNumber: 49\n                    }, this)]\n                  }, product.product_id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 514,\n                    columnNumber: 45\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                  children: \"Ch\\u1ECDn c\\xE1c s\\u1EA3n ph\\u1EA9m s\\u1EBD \\u0111\\u01B0\\u1EE3c \\xE1p d\\u1EE5ng khuy\\u1EBFn m\\xE3i n\\xE0y\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 520,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n            value: tabValue,\n            index: 2,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle1\",\n                sx: {\n                  mb: 2,\n                  display: 'flex',\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsxDEV(CategoryIcon, {\n                  sx: {\n                    mr: 1\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 37\n                }, this), \"Danh m\\u1EE5c \\xE1p d\\u1EE5ng khuy\\u1EBFn m\\xE3i\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 529,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  id: \"categories-select-label\",\n                  children: \"Danh m\\u1EE5c\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 535,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  labelId: \"categories-select-label\",\n                  multiple: true,\n                  value: selectedCategoryIds,\n                  onChange: handleCategorySelectionChange,\n                  renderValue: selected => /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: 'flex',\n                      flexWrap: 'wrap',\n                      gap: 0.5\n                    },\n                    children: selected.map(value => {\n                      const category = categories.find(c => c.category_id === value);\n                      return /*#__PURE__*/_jsxDEV(Chip, {\n                        label: (category === null || category === void 0 ? void 0 : category.name) || value\n                      }, value, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 546,\n                        columnNumber: 57\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 542,\n                    columnNumber: 45\n                  }, this),\n                  children: categories.map(category => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: category.category_id,\n                    children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                      checked: selectedCategoryIds.indexOf(category.category_id) > -1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 554,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: category.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 555,\n                      columnNumber: 49\n                    }, this)]\n                  }, category.category_id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 553,\n                    columnNumber: 45\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 536,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                  children: \"Ch\\u1ECDn c\\xE1c danh m\\u1EE5c s\\u1EBD \\u0111\\u01B0\\u1EE3c \\xE1p d\\u1EE5ng khuy\\u1EBFn m\\xE3i n\\xE0y. T\\u1EA5t c\\u1EA3 s\\u1EA3n ph\\u1EA9m trong danh m\\u1EE5c s\\u1EBD \\u0111\\u01B0\\u1EE3c gi\\u1EA3m gi\\xE1.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 559,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 534,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleCloseDialog,\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleSubmit,\n            variant: \"contained\",\n            children: \"L\\u01B0u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 312,\n    columnNumber: 9\n  }, this);\n};\n_s(PromotionManagement, \"ZB0g/9Ig7CXqYy68bfLyuMydzuo=\", false, function () {\n  return [useLocation, useSnackbar];\n});\n_c4 = PromotionManagement;\nexport default PromotionManagement;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"GridContainer\");\n$RefreshReg$(_c2, \"GridItemHalf\");\n$RefreshReg$(_c3, \"TabPanel\");\n$RefreshReg$(_c4, \"PromotionManagement\");","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Button","IconButton","Dialog","DialogActions","DialogContent","DialogTitle","TextField","MenuItem","Select","FormControl","InputLabel","Chip","FormHelperText","InputAdornment","Tab","Tabs","Checkbox","ListItemText","EditIcon","DeleteIcon","AddIcon","PercentIcon","DateRangeIcon","CategoryIcon","InventoryIcon","Layout","getPromotions","createPromotion","updatePromotion","deletePromotion","getCategories","getProducts","useSnackbar","styled","useLocation","jsxDEV","_jsxDEV","GridContainer","theme","display","flexWrap","width","margin","_c","GridItemHalf","padding","boxSizing","flex","breakpoints","up","_c2","TabPanel","props","children","value","index","other","role","hidden","id","sx","p","fileName","_jsxFileName","lineNumber","columnNumber","_c3","formatDate","dateString","date","Date","toLocaleString","PromotionManagement","_s","location","selectedProductId","selectedCategoryId","state","promotions","setPromotions","categories","setCategories","products","setProducts","loading","setLoading","openDialog","setOpenDialog","editingPromotion","setEditingPromotion","tabValue","setTabValue","formData","setFormData","title","description","discount_percentage","start_date","toISOString","slice","end_date","setMonth","getMonth","img_banner","selectedProductIds","setSelectedProductIds","selectedCategoryIds","setSelectedCategoryIds","enqueueSnackbar","fetchPromotions","fetchCategories","fetchProducts","handleOpenDialog","length","response","data","error","console","variant","promotion","toString","handleCloseDialog","handleTextFieldChange","e","name","target","prev","handleSelectChange","handleDateChange","handleTabChange","event","newValue","handleProductSelectionChange","handleCategorySelectionChange","validateForm","trim","isNaN","Number","handleSubmit","promotionData","product_ids","category_ids","promotion_id","JSON","stringify","handleDelete","window","confirm","justifyContent","alignItems","mb","startIcon","onClick","component","align","colSpan","map","now","startDate","endDate","status","statusColor","label","color","size","open","onClose","maxWidth","fullWidth","borderBottom","borderColor","onChange","flexDirection","gap","mt","required","multiline","rows","type","InputProps","startAdornment","position","InputLabelProps","shrink","placeholder","mr","labelId","multiple","renderValue","selected","product","find","product_id","checked","indexOf","primary","secondary","price","category","c","category_id","_c4","$RefreshReg$"],"sources":["D:/hoc/chuyen de 1/admin/frontend/admin-panel/src/pages/PromotionManagement.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n    Box, Typography, Paper, Table, TableBody, TableCell, TableContainer, TableHead, \r\n    TableRow, Button, IconButton, Dialog, DialogActions, DialogContent, DialogTitle, \r\n    TextField, MenuItem, Select, FormControl, InputLabel, Grid, Chip, Avatar, \r\n    FormHelperText, CircularProgress, InputAdornment, Tooltip, Tab, Tabs, SelectChangeEvent,\r\n    FormLabel, FormGroup, Checkbox, FormControlLabel, ListItemText\r\n} from '@mui/material';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport PercentIcon from '@mui/icons-material/Percent';\r\nimport DateRangeIcon from '@mui/icons-material/DateRange';\r\nimport CategoryIcon from '@mui/icons-material/Category';\r\nimport InventoryIcon from '@mui/icons-material/Inventory';\r\nimport Layout from '../components/Layout';\r\nimport { \r\n    getPromotions, createPromotion, updatePromotion, deletePromotion,\r\n    getCategories, getProducts\r\n} from '../services/api';\r\nimport { Promotion, Category, Product } from '../types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { styled } from '@mui/material/styles';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\n// Tạo các styled components thay thế cho Grid\r\nconst GridContainer = styled('div')(({ theme }) => ({\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    width: '100%',\r\n    margin: '-8px',\r\n}));\r\n\r\nconst GridItemHalf = styled('div')(({ theme }) => ({\r\n    padding: '8px',\r\n    boxSizing: 'border-box',\r\n    flex: '0 0 auto',\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n        width: '50%',\r\n    },\r\n}));\r\n\r\ninterface TabPanelProps {\r\n    children?: React.ReactNode;\r\n    index: number;\r\n    value: number;\r\n}\r\n\r\nfunction TabPanel(props: TabPanelProps) {\r\n    const { children, value, index, ...other } = props;\r\n\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`promotion-tabpanel-${index}`}\r\n            aria-labelledby={`promotion-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && (\r\n                <Box sx={{ p: 3 }}>\r\n                    {children}\r\n                </Box>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleString('vi-VN');\r\n};\r\n\r\nconst PromotionManagement: React.FC = () => {\r\n    const location = useLocation();\r\n    const { selectedProductId, selectedCategoryId } = location.state || {};\r\n    \r\n    const [promotions, setPromotions] = useState<Promotion[]>([]);\r\n    const [categories, setCategories] = useState<Category[]>([]);\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [openDialog, setOpenDialog] = useState(false);\r\n    const [editingPromotion, setEditingPromotion] = useState<Promotion | null>(null);\r\n    const [tabValue, setTabValue] = useState(0);\r\n    \r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        description: '',\r\n        discount_percentage: '',\r\n        start_date: new Date().toISOString().slice(0, 16),\r\n        end_date: new Date(new Date().setMonth(new Date().getMonth() + 1)).toISOString().slice(0, 16),\r\n        img_banner: '',\r\n    });\r\n    \r\n    const [selectedProductIds, setSelectedProductIds] = useState<number[]>([]);\r\n    const [selectedCategoryIds, setSelectedCategoryIds] = useState<number[]>([]);\r\n    \r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    useEffect(() => {\r\n        fetchPromotions();\r\n        fetchCategories();\r\n        fetchProducts();\r\n        \r\n        // Nếu được mở từ trang sản phẩm hoặc danh mục, tự động mở dialog thêm mới\r\n        if (selectedProductId || selectedCategoryId) {\r\n            handleOpenDialog();\r\n        }\r\n    }, []);\r\n    \r\n    useEffect(() => {\r\n        // Nếu được mở từ trang sản phẩm, tự động chọn sản phẩm đó\r\n        if (selectedProductId && products.length > 0) {\r\n            setSelectedProductIds([selectedProductId]);\r\n            setTabValue(1); // Chuyển đến tab sản phẩm\r\n        }\r\n        \r\n        // Nếu được mở từ trang danh mục, tự động chọn danh mục đó\r\n        if (selectedCategoryId && categories.length > 0) {\r\n            setSelectedCategoryIds([selectedCategoryId]);\r\n            setTabValue(2); // Chuyển đến tab danh mục\r\n        }\r\n    }, [selectedProductId, selectedCategoryId, products, categories]);\r\n\r\n    const fetchPromotions = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await getPromotions();\r\n            setPromotions(response.data);\r\n        } catch (error) {\r\n            console.error('Không thể lấy dữ liệu khuyến mãi:', error);\r\n            enqueueSnackbar('Không thể lấy danh sách khuyến mãi', { variant: 'error' });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchCategories = async () => {\r\n        try {\r\n            const response = await getCategories();\r\n            setCategories(response.data);\r\n        } catch (error) {\r\n            console.error('Không thể lấy dữ liệu danh mục:', error);\r\n            enqueueSnackbar('Không thể lấy danh sách danh mục', { variant: 'error' });\r\n        }\r\n    };\r\n\r\n    const fetchProducts = async () => {\r\n        try {\r\n            const response = await getProducts();\r\n            setProducts(response.data);\r\n        } catch (error) {\r\n            console.error('Không thể lấy dữ liệu sản phẩm:', error);\r\n            enqueueSnackbar('Không thể lấy danh sách sản phẩm', { variant: 'error' });\r\n        }\r\n    };\r\n\r\n    const handleOpenDialog = (promotion?: Promotion) => {\r\n        if (promotion) {\r\n            setEditingPromotion(promotion);\r\n            setFormData({\r\n                title: promotion.title,\r\n                description: promotion.description || '',\r\n                discount_percentage: promotion.discount_percentage.toString(),\r\n                start_date: new Date(promotion.start_date).toISOString().slice(0, 16),\r\n                end_date: new Date(promotion.end_date).toISOString().slice(0, 16),\r\n                img_banner: promotion.img_banner || '',\r\n            });\r\n            \r\n            // Trong thực tế, ta cần gọi API để lấy danh sách sản phẩm và danh mục\r\n            // được áp dụng khuyến mãi này, nhưng vì chưa có API đó, ta sẽ để trống\r\n            setSelectedProductIds([]);\r\n            setSelectedCategoryIds([]);\r\n        } else {\r\n            setEditingPromotion(null);\r\n            setFormData({\r\n                title: '',\r\n                description: '',\r\n                discount_percentage: '',\r\n                start_date: new Date().toISOString().slice(0, 16),\r\n                end_date: new Date(new Date().setMonth(new Date().getMonth() + 1)).toISOString().slice(0, 16),\r\n                img_banner: '',\r\n            });\r\n            setSelectedProductIds([]);\r\n            setSelectedCategoryIds([]);\r\n        }\r\n        setOpenDialog(true);\r\n        setTabValue(0);\r\n    };\r\n\r\n    const handleCloseDialog = () => {\r\n        setOpenDialog(false);\r\n        setEditingPromotion(null);\r\n    };\r\n\r\n    const handleTextFieldChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const handleSelectChange = (e: SelectChangeEvent) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\r\n        setTabValue(newValue);\r\n    };\r\n\r\n    const handleProductSelectionChange = (event: SelectChangeEvent<number[]>) => {\r\n        const { value } = event.target;\r\n        setSelectedProductIds(typeof value === 'string' ? [] : value as number[]);\r\n    };\r\n\r\n    const handleCategorySelectionChange = (event: SelectChangeEvent<number[]>) => {\r\n        const { value } = event.target;\r\n        setSelectedCategoryIds(typeof value === 'string' ? [] : value as number[]);\r\n    };\r\n\r\n    const validateForm = () => {\r\n        if (!formData.title.trim()) {\r\n            enqueueSnackbar('Vui lòng nhập tiêu đề khuyến mãi', { variant: 'error' });\r\n            return false;\r\n        }\r\n        \r\n        if (!formData.discount_percentage || isNaN(Number(formData.discount_percentage)) || \r\n            Number(formData.discount_percentage) <= 0 || Number(formData.discount_percentage) > 100) {\r\n            enqueueSnackbar('Vui lòng nhập phần trăm giảm giá hợp lệ (1-100)', { variant: 'error' });\r\n            return false;\r\n        }\r\n        \r\n        if (!formData.start_date || !formData.end_date) {\r\n            enqueueSnackbar('Vui lòng chọn ngày bắt đầu và kết thúc', { variant: 'error' });\r\n            return false;\r\n        }\r\n        \r\n        if (new Date(formData.start_date) >= new Date(formData.end_date)) {\r\n            enqueueSnackbar('Ngày kết thúc phải sau ngày bắt đầu', { variant: 'error' });\r\n            return false;\r\n        }\r\n        \r\n        return true;\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if (!validateForm()) return;\r\n        \r\n        try {\r\n            const promotionData: any = {\r\n                title: formData.title,\r\n                description: formData.description || null,\r\n                discount_percentage: Number(formData.discount_percentage),\r\n                start_date: new Date(formData.start_date).toISOString(),\r\n                end_date: new Date(formData.end_date).toISOString(),\r\n                img_banner: formData.img_banner || null,\r\n                product_ids: selectedProductIds,\r\n                category_ids: selectedCategoryIds\r\n            };\r\n            \r\n            if (editingPromotion) {\r\n                // Cập nhật khuyến mãi\r\n                await updatePromotion(editingPromotion.promotion_id, promotionData);\r\n                enqueueSnackbar('Cập nhật khuyến mãi thành công!', { variant: 'success' });\r\n            } else {\r\n                // Tạo khuyến mãi mới\r\n                await createPromotion(promotionData);\r\n                enqueueSnackbar('Tạo khuyến mãi mới thành công!', { variant: 'success' });\r\n            }\r\n            \r\n            handleCloseDialog();\r\n            fetchPromotions();\r\n        } catch (error: any) {\r\n            console.error('Lỗi khi lưu khuyến mãi:', error);\r\n            if (error.response) {\r\n                console.error('Lỗi response:', error.response.data);\r\n                enqueueSnackbar(`Lỗi: ${JSON.stringify(error.response.data)}`, { variant: 'error' });\r\n            } else {\r\n                enqueueSnackbar('Lỗi khi lưu dữ liệu khuyến mãi', { variant: 'error' });\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: number) => {\r\n        if (window.confirm('Bạn có chắc chắn muốn xóa khuyến mãi này?')) {\r\n            try {\r\n                await deletePromotion(id);\r\n                enqueueSnackbar('Xóa khuyến mãi thành công!', { variant: 'success' });\r\n                fetchPromotions();\r\n            } catch (error) {\r\n                console.error('Lỗi khi xóa khuyến mãi:', error);\r\n                enqueueSnackbar('Không thể xóa khuyến mãi', { variant: 'error' });\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Layout>\r\n            <Box sx={{ p: 3 }}>\r\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\r\n                    <Typography variant=\"h4\">Quản lý Khuyến mãi</Typography>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        startIcon={<AddIcon />} \r\n                        onClick={() => handleOpenDialog()}\r\n                    >\r\n                        Thêm Khuyến mãi\r\n                    </Button>\r\n                </Box>\r\n\r\n                <TableContainer component={Paper}>\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell>ID</TableCell>\r\n                                <TableCell>Tiêu đề</TableCell>\r\n                                <TableCell>Phần trăm giảm giá</TableCell>\r\n                                <TableCell>Ngày bắt đầu</TableCell>\r\n                                <TableCell>Ngày kết thúc</TableCell>\r\n                                <TableCell>Trạng thái</TableCell>\r\n                                <TableCell align=\"right\">Thao tác</TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {loading ? (\r\n                                <TableRow>\r\n                                    <TableCell colSpan={7} align=\"center\">Đang tải...</TableCell>\r\n                                </TableRow>\r\n                            ) : promotions.length === 0 ? (\r\n                                <TableRow>\r\n                                    <TableCell colSpan={7} align=\"center\">Không có dữ liệu</TableCell>\r\n                                </TableRow>\r\n                            ) : (\r\n                                promotions.map((promotion) => {\r\n                                    const now = new Date();\r\n                                    const startDate = new Date(promotion.start_date);\r\n                                    const endDate = new Date(promotion.end_date);\r\n                                    \r\n                                    let status = \"Chưa bắt đầu\";\r\n                                    let statusColor = \"info\";\r\n                                    \r\n                                    if (now >= startDate && now <= endDate) {\r\n                                        status = \"Đang diễn ra\";\r\n                                        statusColor = \"success\";\r\n                                    } else if (now > endDate) {\r\n                                        status = \"Đã kết thúc\";\r\n                                        statusColor = \"error\";\r\n                                    }\r\n                                    \r\n                                    return (\r\n                                        <TableRow key={promotion.promotion_id}>\r\n                                            <TableCell>{promotion.promotion_id}</TableCell>\r\n                                            <TableCell>{promotion.title}</TableCell>\r\n                                            <TableCell>{promotion.discount_percentage}%</TableCell>\r\n                                            <TableCell>{formatDate(promotion.start_date)}</TableCell>\r\n                                            <TableCell>{formatDate(promotion.end_date)}</TableCell>\r\n                                            <TableCell>\r\n                                                <Chip \r\n                                                    label={status} \r\n                                                    color={statusColor as any}\r\n                                                    size=\"small\"\r\n                                                />\r\n                                            </TableCell>\r\n                                            <TableCell align=\"right\">\r\n                                                <IconButton onClick={() => handleOpenDialog(promotion)}>\r\n                                                    <EditIcon />\r\n                                                </IconButton>\r\n                                                <IconButton onClick={() => handleDelete(promotion.promotion_id)}>\r\n                                                    <DeleteIcon />\r\n                                                </IconButton>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    );\r\n                                })\r\n                            )}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n\r\n                {/* Dialog Thêm/Sửa Khuyến mãi */}\r\n                <Dialog \r\n                    open={openDialog} \r\n                    onClose={handleCloseDialog} \r\n                    maxWidth=\"md\" \r\n                    fullWidth\r\n                >\r\n                    <DialogTitle>{editingPromotion ? 'Sửa Khuyến mãi' : 'Thêm Khuyến mãi Mới'}</DialogTitle>\r\n                    <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\r\n                        <Tabs value={tabValue} onChange={handleTabChange} aria-label=\"promotion edit tabs\">\r\n                            <Tab label=\"Thông tin cơ bản\" />\r\n                            <Tab label=\"Sản phẩm áp dụng\" />\r\n                            <Tab label=\"Danh mục áp dụng\" />\r\n                        </Tabs>\r\n                    </Box>\r\n                    <DialogContent>\r\n                        <TabPanel value={tabValue} index={0}>\r\n                            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mt: 2 }}>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    label=\"Tiêu đề khuyến mãi\"\r\n                                    name=\"title\"\r\n                                    value={formData.title}\r\n                                    onChange={handleTextFieldChange}\r\n                                    required\r\n                                />\r\n                                <TextField\r\n                                    fullWidth\r\n                                    label=\"Mô tả\"\r\n                                    name=\"description\"\r\n                                    value={formData.description}\r\n                                    onChange={handleTextFieldChange}\r\n                                    multiline\r\n                                    rows={4}\r\n                                />\r\n                                <TextField\r\n                                    fullWidth\r\n                                    label=\"Phần trăm giảm giá\"\r\n                                    name=\"discount_percentage\"\r\n                                    value={formData.discount_percentage}\r\n                                    onChange={handleTextFieldChange}\r\n                                    type=\"number\"\r\n                                    InputProps={{\r\n                                        startAdornment: <InputAdornment position=\"start\"><PercentIcon /></InputAdornment>,\r\n                                    }}\r\n                                    required\r\n                                />\r\n                                <GridContainer>\r\n                                    <GridItemHalf>\r\n                                        <TextField\r\n                                            fullWidth\r\n                                            label=\"Ngày bắt đầu\"\r\n                                            name=\"start_date\"\r\n                                            type=\"datetime-local\"\r\n                                            value={formData.start_date}\r\n                                            onChange={handleDateChange}\r\n                                            InputLabelProps={{\r\n                                                shrink: true,\r\n                                            }}\r\n                                            InputProps={{\r\n                                                startAdornment: <InputAdornment position=\"start\"><DateRangeIcon /></InputAdornment>,\r\n                                            }}\r\n                                            required\r\n                                        />\r\n                                    </GridItemHalf>\r\n                                    <GridItemHalf>\r\n                                        <TextField\r\n                                            fullWidth\r\n                                            label=\"Ngày kết thúc\"\r\n                                            name=\"end_date\"\r\n                                            type=\"datetime-local\"\r\n                                            value={formData.end_date}\r\n                                            onChange={handleDateChange}\r\n                                            InputLabelProps={{\r\n                                                shrink: true,\r\n                                            }}\r\n                                            InputProps={{\r\n                                                startAdornment: <InputAdornment position=\"start\"><DateRangeIcon /></InputAdornment>,\r\n                                            }}\r\n                                            required\r\n                                        />\r\n                                    </GridItemHalf>\r\n                                </GridContainer>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    label=\"Ảnh banner (URL)\"\r\n                                    name=\"img_banner\"\r\n                                    value={formData.img_banner}\r\n                                    onChange={handleTextFieldChange}\r\n                                    placeholder=\"https://example.com/banner.jpg\"\r\n                                />\r\n                            </Box>\r\n                        </TabPanel>\r\n                        \r\n                        <TabPanel value={tabValue} index={1}>\r\n                            <Box sx={{ mt: 2 }}>\r\n                                <Typography variant=\"subtitle1\" sx={{ mb: 2, display: 'flex', alignItems: 'center' }}>\r\n                                    <InventoryIcon sx={{ mr: 1 }} />\r\n                                    Sản phẩm áp dụng khuyến mãi\r\n                                </Typography>\r\n                                \r\n                                <FormControl fullWidth>\r\n                                    <InputLabel id=\"products-select-label\">Sản phẩm</InputLabel>\r\n                                    <Select\r\n                                        labelId=\"products-select-label\"\r\n                                        multiple\r\n                                        value={selectedProductIds}\r\n                                        onChange={handleProductSelectionChange}\r\n                                        renderValue={(selected) => (\r\n                                            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n                                                {selected.map((value) => {\r\n                                                    const product = products.find(p => p.product_id === value);\r\n                                                    return (\r\n                                                        <Chip key={value} label={product?.name || value} />\r\n                                                    )\r\n                                                })}\r\n                                            </Box>\r\n                                        )}\r\n                                    >\r\n                                        {products.map((product) => (\r\n                                            <MenuItem key={product.product_id} value={product.product_id}>\r\n                                                <Checkbox checked={selectedProductIds.indexOf(product.product_id) > -1} />\r\n                                                <ListItemText primary={product.name} secondary={`${product.price.toLocaleString('vi-VN')}đ`} />\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                    </Select>\r\n                                    <FormHelperText>\r\n                                        Chọn các sản phẩm sẽ được áp dụng khuyến mãi này\r\n                                    </FormHelperText>\r\n                                </FormControl>\r\n                            </Box>\r\n                        </TabPanel>\r\n                        \r\n                        <TabPanel value={tabValue} index={2}>\r\n                            <Box sx={{ mt: 2 }}>\r\n                                <Typography variant=\"subtitle1\" sx={{ mb: 2, display: 'flex', alignItems: 'center' }}>\r\n                                    <CategoryIcon sx={{ mr: 1 }} />\r\n                                    Danh mục áp dụng khuyến mãi\r\n                                </Typography>\r\n                                \r\n                                <FormControl fullWidth>\r\n                                    <InputLabel id=\"categories-select-label\">Danh mục</InputLabel>\r\n                                    <Select\r\n                                        labelId=\"categories-select-label\"\r\n                                        multiple\r\n                                        value={selectedCategoryIds}\r\n                                        onChange={handleCategorySelectionChange}\r\n                                        renderValue={(selected) => (\r\n                                            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n                                                {selected.map((value) => {\r\n                                                    const category = categories.find(c => c.category_id === value);\r\n                                                    return (\r\n                                                        <Chip key={value} label={category?.name || value} />\r\n                                                    )\r\n                                                })}\r\n                                            </Box>\r\n                                        )}\r\n                                    >\r\n                                        {categories.map((category) => (\r\n                                            <MenuItem key={category.category_id} value={category.category_id}>\r\n                                                <Checkbox checked={selectedCategoryIds.indexOf(category.category_id) > -1} />\r\n                                                <ListItemText primary={category.name} />\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                    </Select>\r\n                                    <FormHelperText>\r\n                                        Chọn các danh mục sẽ được áp dụng khuyến mãi này. Tất cả sản phẩm trong danh mục sẽ được giảm giá.\r\n                                    </FormHelperText>\r\n                                </FormControl>\r\n                            </Box>\r\n                        </TabPanel>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={handleCloseDialog}>Hủy</Button>\r\n                        <Button onClick={handleSubmit} variant=\"contained\">Lưu</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </Box>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default PromotionManagement; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}