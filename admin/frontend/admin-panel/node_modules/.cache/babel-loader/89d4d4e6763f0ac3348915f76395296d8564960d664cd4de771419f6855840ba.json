{"ast":null,"code":"var _jsxFileName = \"D:\\\\hoc\\\\chuyen de 1\\\\admin\\\\frontend\\\\admin-panel\\\\src\\\\pages\\\\PromotionManagement.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Box, Typography, Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Button, IconButton, Dialog, DialogActions, DialogContent, DialogTitle, TextField, MenuItem, Select, FormControl, InputLabel, Chip, FormHelperText, CircularProgress, InputAdornment, Tab, Tabs, Checkbox, ListItemText } from '@mui/material';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport AddIcon from '@mui/icons-material/Add';\nimport PercentIcon from '@mui/icons-material/Percent';\nimport DateRangeIcon from '@mui/icons-material/DateRange';\nimport CategoryIcon from '@mui/icons-material/Category';\nimport InventoryIcon from '@mui/icons-material/Inventory';\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\nimport PhotoIcon from '@mui/icons-material/Photo';\nimport Layout from '../components/Layout';\nimport { getPromotions, createPromotion, updatePromotion, deletePromotion, getCategories, getProducts } from '../services/api';\nimport { useSnackbar } from 'notistack';\nimport { styled } from '@mui/material/styles';\nimport { useLocation } from 'react-router-dom';\n\n// Cloudinary configuration\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CLOUDINARY_UPLOAD_PRESET = 'gamine_preset';\nconst CLOUDINARY_CLOUD_NAME = 'dlexb1dx9';\nconst CLOUDINARY_UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/image/upload`;\n\n// Tạo các styled components thay thế cho Grid\nconst GridContainer = styled('div')(({\n  theme\n}) => ({\n  display: 'flex',\n  flexWrap: 'wrap',\n  width: '100%',\n  margin: '-8px'\n}));\n_c = GridContainer;\nconst GridItemHalf = styled('div')(({\n  theme\n}) => ({\n  padding: '8px',\n  boxSizing: 'border-box',\n  flex: '0 0 auto',\n  width: '100%',\n  [theme.breakpoints.up('sm')]: {\n    width: '50%'\n  }\n}));\n_c2 = GridItemHalf;\nfunction TabPanel(props) {\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `promotion-tabpanel-${index}`,\n    \"aria-labelledby\": `promotion-tab-${index}`,\n    ...other,\n    children: value === index && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n_c3 = TabPanel;\nconst formatDate = dateString => {\n  const date = new Date(dateString);\n  return date.toLocaleString('vi-VN');\n};\nconst PromotionManagement = () => {\n  _s();\n  const location = useLocation();\n  const {\n    selectedProductId,\n    selectedCategoryId\n  } = location.state || {};\n  const [promotions, setPromotions] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [editingPromotion, setEditingPromotion] = useState(null);\n  const [tabValue, setTabValue] = useState(0);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    discount_percentage: '',\n    start_date: new Date().toISOString().slice(0, 16),\n    end_date: new Date(new Date().setMonth(new Date().getMonth() + 1)).toISOString().slice(0, 16),\n    img_banner: ''\n  });\n  const [selectedProductIds, setSelectedProductIds] = useState([]);\n  const [selectedCategoryIds, setSelectedCategoryIds] = useState([]);\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const [uploadingBanner, setUploadingBanner] = useState(false);\n  useEffect(() => {\n    fetchPromotions();\n    fetchCategories();\n    fetchProducts();\n\n    // Nếu được mở từ trang sản phẩm hoặc danh mục, tự động mở dialog thêm mới\n    if (selectedProductId || selectedCategoryId) {\n      handleOpenDialog();\n    }\n  }, []);\n  useEffect(() => {\n    // Nếu được mở từ trang sản phẩm, tự động chọn sản phẩm đó\n    if (selectedProductId && products.length > 0) {\n      setSelectedProductIds([selectedProductId]);\n      setTabValue(1); // Chuyển đến tab sản phẩm\n    }\n\n    // Nếu được mở từ trang danh mục, tự động chọn danh mục đó\n    if (selectedCategoryId && categories.length > 0) {\n      setSelectedCategoryIds([selectedCategoryId]);\n      setTabValue(2); // Chuyển đến tab danh mục\n    }\n  }, [selectedProductId, selectedCategoryId, products, categories]);\n  const fetchPromotions = async () => {\n    try {\n      setLoading(true);\n      const response = await getPromotions();\n      setPromotions(response.data);\n    } catch (error) {\n      console.error('Không thể lấy dữ liệu khuyến mãi:', error);\n      enqueueSnackbar('Không thể lấy danh sách khuyến mãi', {\n        variant: 'error'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchCategories = async () => {\n    try {\n      const response = await getCategories();\n      setCategories(response.data);\n    } catch (error) {\n      console.error('Không thể lấy dữ liệu danh mục:', error);\n      enqueueSnackbar('Không thể lấy danh sách danh mục', {\n        variant: 'error'\n      });\n    }\n  };\n  const fetchProducts = async () => {\n    try {\n      const response = await getProducts();\n      setProducts(response.data);\n    } catch (error) {\n      console.error('Không thể lấy dữ liệu sản phẩm:', error);\n      enqueueSnackbar('Không thể lấy danh sách sản phẩm', {\n        variant: 'error'\n      });\n    }\n  };\n  const handleOpenDialog = promotion => {\n    if (promotion) {\n      setEditingPromotion(promotion);\n      setFormData({\n        title: promotion.title,\n        description: promotion.description || '',\n        discount_percentage: promotion.discount_percentage.toString(),\n        start_date: new Date(promotion.start_date).toISOString().slice(0, 16),\n        end_date: new Date(promotion.end_date).toISOString().slice(0, 16),\n        img_banner: promotion.img_banner || ''\n      });\n\n      // Trong thực tế, ta cần gọi API để lấy danh sách sản phẩm và danh mục\n      // được áp dụng khuyến mãi này, nhưng vì chưa có API đó, ta sẽ để trống\n      setSelectedProductIds([]);\n      setSelectedCategoryIds([]);\n    } else {\n      setEditingPromotion(null);\n      setFormData({\n        title: '',\n        description: '',\n        discount_percentage: '',\n        start_date: new Date().toISOString().slice(0, 16),\n        end_date: new Date(new Date().setMonth(new Date().getMonth() + 1)).toISOString().slice(0, 16),\n        img_banner: ''\n      });\n      setSelectedProductIds([]);\n      setSelectedCategoryIds([]);\n    }\n    setOpenDialog(true);\n    setTabValue(0);\n  };\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n    setEditingPromotion(null);\n  };\n  const handleTextFieldChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSelectChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleDateChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n  const handleProductSelectionChange = event => {\n    const {\n      value\n    } = event.target;\n    setSelectedProductIds(typeof value === 'string' ? [] : value);\n  };\n  const handleCategorySelectionChange = event => {\n    const {\n      value\n    } = event.target;\n    setSelectedCategoryIds(typeof value === 'string' ? [] : value);\n  };\n  const validateForm = () => {\n    if (!formData.title.trim()) {\n      enqueueSnackbar('Vui lòng nhập tiêu đề khuyến mãi', {\n        variant: 'error'\n      });\n      return false;\n    }\n    if (!formData.discount_percentage || isNaN(Number(formData.discount_percentage)) || Number(formData.discount_percentage) <= 0 || Number(formData.discount_percentage) > 100) {\n      enqueueSnackbar('Vui lòng nhập phần trăm giảm giá hợp lệ (1-100)', {\n        variant: 'error'\n      });\n      return false;\n    }\n    if (!formData.start_date || !formData.end_date) {\n      enqueueSnackbar('Vui lòng chọn ngày bắt đầu và kết thúc', {\n        variant: 'error'\n      });\n      return false;\n    }\n    if (new Date(formData.start_date) >= new Date(formData.end_date)) {\n      enqueueSnackbar('Ngày kết thúc phải sau ngày bắt đầu', {\n        variant: 'error'\n      });\n      return false;\n    }\n    return true;\n  };\n  const handleSubmit = async () => {\n    if (!validateForm()) return;\n    try {\n      const promotionData = {\n        title: formData.title,\n        description: formData.description || null,\n        discount_percentage: Number(formData.discount_percentage),\n        start_date: new Date(formData.start_date).toISOString(),\n        end_date: new Date(formData.end_date).toISOString(),\n        img_banner: formData.img_banner || null,\n        product_ids: selectedProductIds,\n        category_ids: selectedCategoryIds\n      };\n      if (editingPromotion) {\n        // Cập nhật khuyến mãi\n        await updatePromotion(editingPromotion.promotion_id, promotionData);\n        enqueueSnackbar('Cập nhật khuyến mãi thành công!', {\n          variant: 'success'\n        });\n      } else {\n        // Tạo khuyến mãi mới\n        await createPromotion(promotionData);\n        enqueueSnackbar('Tạo khuyến mãi mới thành công!', {\n          variant: 'success'\n        });\n      }\n      handleCloseDialog();\n      fetchPromotions();\n    } catch (error) {\n      console.error('Lỗi khi lưu khuyến mãi:', error);\n      if (error.response) {\n        console.error('Lỗi response:', error.response.data);\n        enqueueSnackbar(`Lỗi: ${JSON.stringify(error.response.data)}`, {\n          variant: 'error'\n        });\n      } else {\n        enqueueSnackbar('Lỗi khi lưu dữ liệu khuyến mãi', {\n          variant: 'error'\n        });\n      }\n    }\n  };\n  const handleDelete = async id => {\n    if (window.confirm('Bạn có chắc chắn muốn xóa khuyến mãi này?')) {\n      try {\n        await deletePromotion(id);\n        enqueueSnackbar('Xóa khuyến mãi thành công!', {\n          variant: 'success'\n        });\n        fetchPromotions();\n      } catch (error) {\n        console.error('Lỗi khi xóa khuyến mãi:', error);\n        enqueueSnackbar('Không thể xóa khuyến mãi', {\n          variant: 'error'\n        });\n      }\n    }\n  };\n  const handleUploadBanner = async e => {\n    if (!e.target.files || e.target.files.length === 0) return;\n    const file = e.target.files[0];\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);\n    try {\n      setUploadingBanner(true);\n      const response = await fetch(CLOUDINARY_UPLOAD_URL, {\n        method: 'POST',\n        body: formData\n      });\n      const data = await response.json();\n      if (data.secure_url) {\n        setFormData(prev => ({\n          ...prev,\n          img_banner: data.secure_url\n        }));\n        enqueueSnackbar('Tải ảnh banner lên thành công!', {\n          variant: 'success'\n        });\n      }\n    } catch (error) {\n      console.error('Lỗi khi tải ảnh banner:', error);\n      enqueueSnackbar('Không thể tải ảnh banner lên', {\n        variant: 'error'\n      });\n    } finally {\n      setUploadingBanner(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          children: \"Qu\\u1EA3n l\\xFD Khuy\\u1EBFn m\\xE3i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 36\n          }, this),\n          onClick: () => handleOpenDialog(),\n          children: \"Th\\xEAm Khuy\\u1EBFn m\\xE3i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        component: Paper,\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Ti\\xEAu \\u0111\\u1EC1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Ph\\u1EA7n tr\\u0103m gi\\u1EA3m gi\\xE1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Ng\\xE0y k\\u1EBFt th\\xFAc\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Tr\\u1EA1ng th\\xE1i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"Thao t\\xE1c\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: loading ? /*#__PURE__*/_jsxDEV(TableRow, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                colSpan: 7,\n                align: \"center\",\n                children: \"\\u0110ang t\\u1EA3i...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 33\n            }, this) : promotions.length === 0 ? /*#__PURE__*/_jsxDEV(TableRow, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                colSpan: 7,\n                align: \"center\",\n                children: \"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 33\n            }, this) : promotions.map(promotion => {\n              const now = new Date();\n              const startDate = new Date(promotion.start_date);\n              const endDate = new Date(promotion.end_date);\n              let status = \"Chưa bắt đầu\";\n              let statusColor = \"info\";\n              if (now >= startDate && now <= endDate) {\n                status = \"Đang diễn ra\";\n                statusColor = \"success\";\n              } else if (now > endDate) {\n                status = \"Đã kết thúc\";\n                statusColor = \"error\";\n              }\n              return /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  children: promotion.promotion_id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: promotion.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: [promotion.discount_percentage, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: formatDate(promotion.start_date)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: formatDate(promotion.end_date)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(Chip, {\n                    label: status,\n                    color: statusColor,\n                    size: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 414,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"right\",\n                  children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                    onClick: () => handleOpenDialog(promotion),\n                    children: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 422,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 421,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                    onClick: () => handleDelete(promotion.promotion_id),\n                    children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 425,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 424,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 45\n                }, this)]\n              }, promotion.promotion_id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 41\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: openDialog,\n        onClose: handleCloseDialog,\n        maxWidth: \"md\",\n        fullWidth: true,\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          children: editingPromotion ? 'Sửa Khuyến mãi' : 'Thêm Khuyến mãi Mới'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            borderBottom: 1,\n            borderColor: 'divider'\n          },\n          children: /*#__PURE__*/_jsxDEV(Tabs, {\n            value: tabValue,\n            onChange: handleTabChange,\n            \"aria-label\": \"promotion edit tabs\",\n            children: [/*#__PURE__*/_jsxDEV(Tab, {\n              label: \"Th\\xF4ng tin c\\u01A1 b\\u1EA3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"S\\u1EA3n ph\\u1EA9m \\xE1p d\\u1EE5ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"Danh m\\u1EE5c \\xE1p d\\u1EE5ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          children: [/*#__PURE__*/_jsxDEV(TabPanel, {\n            value: tabValue,\n            index: 0,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                flexDirection: 'column',\n                gap: 2,\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ti\\xEAu \\u0111\\u1EC1 khuy\\u1EBFn m\\xE3i\",\n                name: \"title\",\n                value: formData.title,\n                onChange: handleTextFieldChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"M\\xF4 t\\u1EA3\",\n                name: \"description\",\n                value: formData.description,\n                onChange: handleTextFieldChange,\n                multiline: true,\n                rows: 4\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ph\\u1EA7n tr\\u0103m gi\\u1EA3m gi\\xE1\",\n                name: \"discount_percentage\",\n                value: formData.discount_percentage,\n                onChange: handleTextFieldChange,\n                type: \"number\",\n                InputProps: {\n                  startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                    position: \"start\",\n                    children: /*#__PURE__*/_jsxDEV(PercentIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 479,\n                      columnNumber: 90\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 479,\n                    columnNumber: 57\n                  }, this)\n                },\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(GridContainer, {\n                children: [/*#__PURE__*/_jsxDEV(GridItemHalf, {\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    fullWidth: true,\n                    label: \"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u\",\n                    name: \"start_date\",\n                    type: \"datetime-local\",\n                    value: formData.start_date,\n                    onChange: handleDateChange,\n                    InputLabelProps: {\n                      shrink: true\n                    },\n                    InputProps: {\n                      startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                        position: \"start\",\n                        children: /*#__PURE__*/_jsxDEV(DateRangeIcon, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 496,\n                          columnNumber: 98\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 496,\n                        columnNumber: 65\n                      }, this)\n                    },\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 485,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(GridItemHalf, {\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    fullWidth: true,\n                    label: \"Ng\\xE0y k\\u1EBFt th\\xFAc\",\n                    name: \"end_date\",\n                    type: \"datetime-local\",\n                    value: formData.end_date,\n                    onChange: handleDateChange,\n                    InputLabelProps: {\n                      shrink: true\n                    },\n                    InputProps: {\n                      startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                        position: \"start\",\n                        children: /*#__PURE__*/_jsxDEV(DateRangeIcon, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 513,\n                          columnNumber: 98\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 513,\n                        columnNumber: 65\n                      }, this)\n                    },\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 502,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 501,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  mt: 2\n                },\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"subtitle2\",\n                  gutterBottom: true,\n                  children: \"\\u1EA2nh banner\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 520,\n                  columnNumber: 37\n                }, this), formData.img_banner ? /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    position: 'relative',\n                    mb: 2\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: formData.img_banner,\n                    alt: \"Banner Preview\",\n                    style: {\n                      width: '100%',\n                      maxHeight: '200px',\n                      objectFit: 'contain',\n                      border: '1px solid #ddd',\n                      borderRadius: '4px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 524,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                    sx: {\n                      position: 'absolute',\n                      top: 8,\n                      right: 8,\n                      bgcolor: 'rgba(255,255,255,0.7)'\n                    },\n                    onClick: () => setFormData(prev => ({\n                      ...prev,\n                      img_banner: ''\n                    })),\n                    children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 533,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 529,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 523,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    width: '100%',\n                    height: '120px',\n                    border: '1px dashed #ccc',\n                    borderRadius: '4px',\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    mb: 2,\n                    bgcolor: 'grey.100'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(PhotoIcon, {\n                    sx: {\n                      fontSize: 40,\n                      color: 'text.secondary',\n                      mb: 1\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 551,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    color: \"text.secondary\",\n                    children: \"Ch\\u01B0a c\\xF3 \\u1EA3nh banner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 552,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  component: \"label\",\n                  startIcon: uploadingBanner ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                    size: 24\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 70\n                  }, this) : /*#__PURE__*/_jsxDEV(CloudUploadIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 103\n                  }, this),\n                  disabled: uploadingBanner,\n                  size: \"small\",\n                  children: [formData.img_banner ? 'Thay đổi ảnh banner' : 'Tải ảnh banner lên', /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    hidden: true,\n                    accept: \"image/*\",\n                    onChange: handleUploadBanner,\n                    disabled: uploadingBanner\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 564,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 556,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                  children: \"\\u1EA2nh banner s\\u1EBD \\u0111\\u01B0\\u1EE3c hi\\u1EC3n th\\u1ECB cho khuy\\u1EBFn m\\xE3i n\\xE0y\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 572,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 519,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n            value: tabValue,\n            index: 1,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle1\",\n                sx: {\n                  mb: 2,\n                  display: 'flex',\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsxDEV(InventoryIcon, {\n                  sx: {\n                    mr: 1\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 582,\n                  columnNumber: 37\n                }, this), \"S\\u1EA3n ph\\u1EA9m \\xE1p d\\u1EE5ng khuy\\u1EBFn m\\xE3i\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  id: \"products-select-label\",\n                  children: \"S\\u1EA3n ph\\u1EA9m\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 587,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  labelId: \"products-select-label\",\n                  multiple: true,\n                  value: selectedProductIds,\n                  onChange: handleProductSelectionChange,\n                  renderValue: selected => /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: 'flex',\n                      flexWrap: 'wrap',\n                      gap: 0.5\n                    },\n                    children: selected.map(value => {\n                      const product = products.find(p => p.product_id === value);\n                      return /*#__PURE__*/_jsxDEV(Chip, {\n                        label: (product === null || product === void 0 ? void 0 : product.name) || value\n                      }, value, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 598,\n                        columnNumber: 57\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 594,\n                    columnNumber: 45\n                  }, this),\n                  children: products.map(product => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: product.product_id,\n                    children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                      checked: selectedProductIds.indexOf(product.product_id) > -1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 606,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: product.name,\n                      secondary: `${product.price.toLocaleString('vi-VN')}đ`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 607,\n                      columnNumber: 49\n                    }, this)]\n                  }, product.product_id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 605,\n                    columnNumber: 45\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 588,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                  children: \"Ch\\u1ECDn c\\xE1c s\\u1EA3n ph\\u1EA9m s\\u1EBD \\u0111\\u01B0\\u1EE3c \\xE1p d\\u1EE5ng khuy\\u1EBFn m\\xE3i n\\xE0y\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 611,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n            value: tabValue,\n            index: 2,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle1\",\n                sx: {\n                  mb: 2,\n                  display: 'flex',\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsxDEV(CategoryIcon, {\n                  sx: {\n                    mr: 1\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 621,\n                  columnNumber: 37\n                }, this), \"Danh m\\u1EE5c \\xE1p d\\u1EE5ng khuy\\u1EBFn m\\xE3i\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 620,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  id: \"categories-select-label\",\n                  children: \"Danh m\\u1EE5c\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 626,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  labelId: \"categories-select-label\",\n                  multiple: true,\n                  value: selectedCategoryIds,\n                  onChange: handleCategorySelectionChange,\n                  renderValue: selected => /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: 'flex',\n                      flexWrap: 'wrap',\n                      gap: 0.5\n                    },\n                    children: selected.map(value => {\n                      const category = categories.find(c => c.category_id === value);\n                      return /*#__PURE__*/_jsxDEV(Chip, {\n                        label: (category === null || category === void 0 ? void 0 : category.name) || value\n                      }, value, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 637,\n                        columnNumber: 57\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 633,\n                    columnNumber: 45\n                  }, this),\n                  children: categories.map(category => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: category.category_id,\n                    children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                      checked: selectedCategoryIds.indexOf(category.category_id) > -1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 645,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: category.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 646,\n                      columnNumber: 49\n                    }, this)]\n                  }, category.category_id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 644,\n                    columnNumber: 45\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 627,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                  children: \"Ch\\u1ECDn c\\xE1c danh m\\u1EE5c s\\u1EBD \\u0111\\u01B0\\u1EE3c \\xE1p d\\u1EE5ng khuy\\u1EBFn m\\xE3i n\\xE0y. T\\u1EA5t c\\u1EA3 s\\u1EA3n ph\\u1EA9m trong danh m\\u1EE5c s\\u1EBD \\u0111\\u01B0\\u1EE3c gi\\u1EA3m gi\\xE1.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 650,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 625,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleCloseDialog,\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleSubmit,\n            variant: \"contained\",\n            children: \"L\\u01B0u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 354,\n    columnNumber: 9\n  }, this);\n};\n_s(PromotionManagement, \"M8ymfu5YxOvEOVXEVyDSG+pCkpw=\", false, function () {\n  return [useLocation, useSnackbar];\n});\n_c4 = PromotionManagement;\nexport default PromotionManagement;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"GridContainer\");\n$RefreshReg$(_c2, \"GridItemHalf\");\n$RefreshReg$(_c3, \"TabPanel\");\n$RefreshReg$(_c4, \"PromotionManagement\");","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Button","IconButton","Dialog","DialogActions","DialogContent","DialogTitle","TextField","MenuItem","Select","FormControl","InputLabel","Chip","FormHelperText","CircularProgress","InputAdornment","Tab","Tabs","Checkbox","ListItemText","EditIcon","DeleteIcon","AddIcon","PercentIcon","DateRangeIcon","CategoryIcon","InventoryIcon","CloudUploadIcon","PhotoIcon","Layout","getPromotions","createPromotion","updatePromotion","deletePromotion","getCategories","getProducts","useSnackbar","styled","useLocation","jsxDEV","_jsxDEV","CLOUDINARY_UPLOAD_PRESET","CLOUDINARY_CLOUD_NAME","CLOUDINARY_UPLOAD_URL","GridContainer","theme","display","flexWrap","width","margin","_c","GridItemHalf","padding","boxSizing","flex","breakpoints","up","_c2","TabPanel","props","children","value","index","other","role","hidden","id","sx","p","fileName","_jsxFileName","lineNumber","columnNumber","_c3","formatDate","dateString","date","Date","toLocaleString","PromotionManagement","_s","location","selectedProductId","selectedCategoryId","state","promotions","setPromotions","categories","setCategories","products","setProducts","loading","setLoading","openDialog","setOpenDialog","editingPromotion","setEditingPromotion","tabValue","setTabValue","formData","setFormData","title","description","discount_percentage","start_date","toISOString","slice","end_date","setMonth","getMonth","img_banner","selectedProductIds","setSelectedProductIds","selectedCategoryIds","setSelectedCategoryIds","enqueueSnackbar","uploadingBanner","setUploadingBanner","fetchPromotions","fetchCategories","fetchProducts","handleOpenDialog","length","response","data","error","console","variant","promotion","toString","handleCloseDialog","handleTextFieldChange","e","name","target","prev","handleSelectChange","handleDateChange","handleTabChange","event","newValue","handleProductSelectionChange","handleCategorySelectionChange","validateForm","trim","isNaN","Number","handleSubmit","promotionData","product_ids","category_ids","promotion_id","JSON","stringify","handleDelete","window","confirm","handleUploadBanner","files","file","FormData","append","fetch","method","body","json","secure_url","justifyContent","alignItems","mb","startIcon","onClick","component","align","colSpan","map","now","startDate","endDate","status","statusColor","label","color","size","open","onClose","maxWidth","fullWidth","borderBottom","borderColor","onChange","flexDirection","gap","mt","required","multiline","rows","type","InputProps","startAdornment","position","InputLabelProps","shrink","gutterBottom","src","alt","style","maxHeight","objectFit","border","borderRadius","top","right","bgcolor","height","fontSize","disabled","accept","mr","labelId","multiple","renderValue","selected","product","find","product_id","checked","indexOf","primary","secondary","price","category","c","category_id","_c4","$RefreshReg$"],"sources":["D:/hoc/chuyen de 1/admin/frontend/admin-panel/src/pages/PromotionManagement.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n    Box, Typography, Paper, Table, TableBody, TableCell, TableContainer, TableHead, \r\n    TableRow, Button, IconButton, Dialog, DialogActions, DialogContent, DialogTitle, \r\n    TextField, MenuItem, Select, FormControl, InputLabel, Grid, Chip, Avatar, \r\n    FormHelperText, CircularProgress, InputAdornment, Tooltip, Tab, Tabs, SelectChangeEvent,\r\n    FormLabel, FormGroup, Checkbox, FormControlLabel, ListItemText\r\n} from '@mui/material';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport PercentIcon from '@mui/icons-material/Percent';\r\nimport DateRangeIcon from '@mui/icons-material/DateRange';\r\nimport CategoryIcon from '@mui/icons-material/Category';\r\nimport InventoryIcon from '@mui/icons-material/Inventory';\r\nimport ImageIcon from '@mui/icons-material/Image';\r\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\r\nimport PhotoIcon from '@mui/icons-material/Photo';\r\nimport Layout from '../components/Layout';\r\nimport { \r\n    getPromotions, createPromotion, updatePromotion, deletePromotion,\r\n    getCategories, getProducts\r\n} from '../services/api';\r\nimport { Promotion, Category, Product } from '../types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { styled } from '@mui/material/styles';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\n// Cloudinary configuration\r\nconst CLOUDINARY_UPLOAD_PRESET = 'gamine_preset';\r\nconst CLOUDINARY_CLOUD_NAME = 'dlexb1dx9'; \r\nconst CLOUDINARY_UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/image/upload`;\r\n\r\n// Tạo các styled components thay thế cho Grid\r\nconst GridContainer = styled('div')(({ theme }) => ({\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    width: '100%',\r\n    margin: '-8px',\r\n}));\r\n\r\nconst GridItemHalf = styled('div')(({ theme }) => ({\r\n    padding: '8px',\r\n    boxSizing: 'border-box',\r\n    flex: '0 0 auto',\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n        width: '50%',\r\n    },\r\n}));\r\n\r\ninterface TabPanelProps {\r\n    children?: React.ReactNode;\r\n    index: number;\r\n    value: number;\r\n}\r\n\r\nfunction TabPanel(props: TabPanelProps) {\r\n    const { children, value, index, ...other } = props;\r\n\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`promotion-tabpanel-${index}`}\r\n            aria-labelledby={`promotion-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && (\r\n                <Box sx={{ p: 3 }}>\r\n                    {children}\r\n                </Box>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleString('vi-VN');\r\n};\r\n\r\nconst PromotionManagement: React.FC = () => {\r\n    const location = useLocation();\r\n    const { selectedProductId, selectedCategoryId } = location.state || {};\r\n    \r\n    const [promotions, setPromotions] = useState<Promotion[]>([]);\r\n    const [categories, setCategories] = useState<Category[]>([]);\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [openDialog, setOpenDialog] = useState(false);\r\n    const [editingPromotion, setEditingPromotion] = useState<Promotion | null>(null);\r\n    const [tabValue, setTabValue] = useState(0);\r\n    \r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        description: '',\r\n        discount_percentage: '',\r\n        start_date: new Date().toISOString().slice(0, 16),\r\n        end_date: new Date(new Date().setMonth(new Date().getMonth() + 1)).toISOString().slice(0, 16),\r\n        img_banner: '',\r\n    });\r\n    \r\n    const [selectedProductIds, setSelectedProductIds] = useState<number[]>([]);\r\n    const [selectedCategoryIds, setSelectedCategoryIds] = useState<number[]>([]);\r\n    \r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const [uploadingBanner, setUploadingBanner] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchPromotions();\r\n        fetchCategories();\r\n        fetchProducts();\r\n        \r\n        // Nếu được mở từ trang sản phẩm hoặc danh mục, tự động mở dialog thêm mới\r\n        if (selectedProductId || selectedCategoryId) {\r\n            handleOpenDialog();\r\n        }\r\n    }, []);\r\n    \r\n    useEffect(() => {\r\n        // Nếu được mở từ trang sản phẩm, tự động chọn sản phẩm đó\r\n        if (selectedProductId && products.length > 0) {\r\n            setSelectedProductIds([selectedProductId]);\r\n            setTabValue(1); // Chuyển đến tab sản phẩm\r\n        }\r\n        \r\n        // Nếu được mở từ trang danh mục, tự động chọn danh mục đó\r\n        if (selectedCategoryId && categories.length > 0) {\r\n            setSelectedCategoryIds([selectedCategoryId]);\r\n            setTabValue(2); // Chuyển đến tab danh mục\r\n        }\r\n    }, [selectedProductId, selectedCategoryId, products, categories]);\r\n\r\n    const fetchPromotions = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await getPromotions();\r\n            setPromotions(response.data);\r\n        } catch (error) {\r\n            console.error('Không thể lấy dữ liệu khuyến mãi:', error);\r\n            enqueueSnackbar('Không thể lấy danh sách khuyến mãi', { variant: 'error' });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchCategories = async () => {\r\n        try {\r\n            const response = await getCategories();\r\n            setCategories(response.data);\r\n        } catch (error) {\r\n            console.error('Không thể lấy dữ liệu danh mục:', error);\r\n            enqueueSnackbar('Không thể lấy danh sách danh mục', { variant: 'error' });\r\n        }\r\n    };\r\n\r\n    const fetchProducts = async () => {\r\n        try {\r\n            const response = await getProducts();\r\n            setProducts(response.data);\r\n        } catch (error) {\r\n            console.error('Không thể lấy dữ liệu sản phẩm:', error);\r\n            enqueueSnackbar('Không thể lấy danh sách sản phẩm', { variant: 'error' });\r\n        }\r\n    };\r\n\r\n    const handleOpenDialog = (promotion?: Promotion) => {\r\n        if (promotion) {\r\n            setEditingPromotion(promotion);\r\n            setFormData({\r\n                title: promotion.title,\r\n                description: promotion.description || '',\r\n                discount_percentage: promotion.discount_percentage.toString(),\r\n                start_date: new Date(promotion.start_date).toISOString().slice(0, 16),\r\n                end_date: new Date(promotion.end_date).toISOString().slice(0, 16),\r\n                img_banner: promotion.img_banner || '',\r\n            });\r\n            \r\n            // Trong thực tế, ta cần gọi API để lấy danh sách sản phẩm và danh mục\r\n            // được áp dụng khuyến mãi này, nhưng vì chưa có API đó, ta sẽ để trống\r\n            setSelectedProductIds([]);\r\n            setSelectedCategoryIds([]);\r\n        } else {\r\n            setEditingPromotion(null);\r\n            setFormData({\r\n                title: '',\r\n                description: '',\r\n                discount_percentage: '',\r\n                start_date: new Date().toISOString().slice(0, 16),\r\n                end_date: new Date(new Date().setMonth(new Date().getMonth() + 1)).toISOString().slice(0, 16),\r\n                img_banner: '',\r\n            });\r\n            setSelectedProductIds([]);\r\n            setSelectedCategoryIds([]);\r\n        }\r\n        setOpenDialog(true);\r\n        setTabValue(0);\r\n    };\r\n\r\n    const handleCloseDialog = () => {\r\n        setOpenDialog(false);\r\n        setEditingPromotion(null);\r\n    };\r\n\r\n    const handleTextFieldChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const handleSelectChange = (e: SelectChangeEvent) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\r\n        setTabValue(newValue);\r\n    };\r\n\r\n    const handleProductSelectionChange = (event: SelectChangeEvent<number[]>) => {\r\n        const { value } = event.target;\r\n        setSelectedProductIds(typeof value === 'string' ? [] : value as number[]);\r\n    };\r\n\r\n    const handleCategorySelectionChange = (event: SelectChangeEvent<number[]>) => {\r\n        const { value } = event.target;\r\n        setSelectedCategoryIds(typeof value === 'string' ? [] : value as number[]);\r\n    };\r\n\r\n    const validateForm = () => {\r\n        if (!formData.title.trim()) {\r\n            enqueueSnackbar('Vui lòng nhập tiêu đề khuyến mãi', { variant: 'error' });\r\n            return false;\r\n        }\r\n        \r\n        if (!formData.discount_percentage || isNaN(Number(formData.discount_percentage)) || \r\n            Number(formData.discount_percentage) <= 0 || Number(formData.discount_percentage) > 100) {\r\n            enqueueSnackbar('Vui lòng nhập phần trăm giảm giá hợp lệ (1-100)', { variant: 'error' });\r\n            return false;\r\n        }\r\n        \r\n        if (!formData.start_date || !formData.end_date) {\r\n            enqueueSnackbar('Vui lòng chọn ngày bắt đầu và kết thúc', { variant: 'error' });\r\n            return false;\r\n        }\r\n        \r\n        if (new Date(formData.start_date) >= new Date(formData.end_date)) {\r\n            enqueueSnackbar('Ngày kết thúc phải sau ngày bắt đầu', { variant: 'error' });\r\n            return false;\r\n        }\r\n        \r\n        return true;\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if (!validateForm()) return;\r\n        \r\n        try {\r\n            const promotionData: any = {\r\n                title: formData.title,\r\n                description: formData.description || null,\r\n                discount_percentage: Number(formData.discount_percentage),\r\n                start_date: new Date(formData.start_date).toISOString(),\r\n                end_date: new Date(formData.end_date).toISOString(),\r\n                img_banner: formData.img_banner || null,\r\n                product_ids: selectedProductIds,\r\n                category_ids: selectedCategoryIds\r\n            };\r\n            \r\n            if (editingPromotion) {\r\n                // Cập nhật khuyến mãi\r\n                await updatePromotion(editingPromotion.promotion_id, promotionData);\r\n                enqueueSnackbar('Cập nhật khuyến mãi thành công!', { variant: 'success' });\r\n            } else {\r\n                // Tạo khuyến mãi mới\r\n                await createPromotion(promotionData);\r\n                enqueueSnackbar('Tạo khuyến mãi mới thành công!', { variant: 'success' });\r\n            }\r\n            \r\n            handleCloseDialog();\r\n            fetchPromotions();\r\n        } catch (error: any) {\r\n            console.error('Lỗi khi lưu khuyến mãi:', error);\r\n            if (error.response) {\r\n                console.error('Lỗi response:', error.response.data);\r\n                enqueueSnackbar(`Lỗi: ${JSON.stringify(error.response.data)}`, { variant: 'error' });\r\n            } else {\r\n                enqueueSnackbar('Lỗi khi lưu dữ liệu khuyến mãi', { variant: 'error' });\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: number) => {\r\n        if (window.confirm('Bạn có chắc chắn muốn xóa khuyến mãi này?')) {\r\n            try {\r\n                await deletePromotion(id);\r\n                enqueueSnackbar('Xóa khuyến mãi thành công!', { variant: 'success' });\r\n                fetchPromotions();\r\n            } catch (error) {\r\n                console.error('Lỗi khi xóa khuyến mãi:', error);\r\n                enqueueSnackbar('Không thể xóa khuyến mãi', { variant: 'error' });\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleUploadBanner = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (!e.target.files || e.target.files.length === 0) return;\r\n        \r\n        const file = e.target.files[0];\r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n        formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);\r\n        \r\n        try {\r\n            setUploadingBanner(true);\r\n            const response = await fetch(CLOUDINARY_UPLOAD_URL, {\r\n                method: 'POST',\r\n                body: formData\r\n            });\r\n            \r\n            const data = await response.json();\r\n            \r\n            if (data.secure_url) {\r\n                setFormData(prev => ({\r\n                    ...prev,\r\n                    img_banner: data.secure_url\r\n                }));\r\n                enqueueSnackbar('Tải ảnh banner lên thành công!', { variant: 'success' });\r\n            }\r\n        } catch (error) {\r\n            console.error('Lỗi khi tải ảnh banner:', error);\r\n            enqueueSnackbar('Không thể tải ảnh banner lên', { variant: 'error' });\r\n        } finally {\r\n            setUploadingBanner(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Layout>\r\n            <Box sx={{ p: 3 }}>\r\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\r\n                    <Typography variant=\"h4\">Quản lý Khuyến mãi</Typography>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        startIcon={<AddIcon />} \r\n                        onClick={() => handleOpenDialog()}\r\n                    >\r\n                        Thêm Khuyến mãi\r\n                    </Button>\r\n                </Box>\r\n\r\n                <TableContainer component={Paper}>\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell>ID</TableCell>\r\n                                <TableCell>Tiêu đề</TableCell>\r\n                                <TableCell>Phần trăm giảm giá</TableCell>\r\n                                <TableCell>Ngày bắt đầu</TableCell>\r\n                                <TableCell>Ngày kết thúc</TableCell>\r\n                                <TableCell>Trạng thái</TableCell>\r\n                                <TableCell align=\"right\">Thao tác</TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {loading ? (\r\n                                <TableRow>\r\n                                    <TableCell colSpan={7} align=\"center\">Đang tải...</TableCell>\r\n                                </TableRow>\r\n                            ) : promotions.length === 0 ? (\r\n                                <TableRow>\r\n                                    <TableCell colSpan={7} align=\"center\">Không có dữ liệu</TableCell>\r\n                                </TableRow>\r\n                            ) : (\r\n                                promotions.map((promotion) => {\r\n                                    const now = new Date();\r\n                                    const startDate = new Date(promotion.start_date);\r\n                                    const endDate = new Date(promotion.end_date);\r\n                                    \r\n                                    let status = \"Chưa bắt đầu\";\r\n                                    let statusColor = \"info\";\r\n                                    \r\n                                    if (now >= startDate && now <= endDate) {\r\n                                        status = \"Đang diễn ra\";\r\n                                        statusColor = \"success\";\r\n                                    } else if (now > endDate) {\r\n                                        status = \"Đã kết thúc\";\r\n                                        statusColor = \"error\";\r\n                                    }\r\n                                    \r\n                                    return (\r\n                                        <TableRow key={promotion.promotion_id}>\r\n                                            <TableCell>{promotion.promotion_id}</TableCell>\r\n                                            <TableCell>{promotion.title}</TableCell>\r\n                                            <TableCell>{promotion.discount_percentage}%</TableCell>\r\n                                            <TableCell>{formatDate(promotion.start_date)}</TableCell>\r\n                                            <TableCell>{formatDate(promotion.end_date)}</TableCell>\r\n                                            <TableCell>\r\n                                                <Chip \r\n                                                    label={status} \r\n                                                    color={statusColor as any}\r\n                                                    size=\"small\"\r\n                                                />\r\n                                            </TableCell>\r\n                                            <TableCell align=\"right\">\r\n                                                <IconButton onClick={() => handleOpenDialog(promotion)}>\r\n                                                    <EditIcon />\r\n                                                </IconButton>\r\n                                                <IconButton onClick={() => handleDelete(promotion.promotion_id)}>\r\n                                                    <DeleteIcon />\r\n                                                </IconButton>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    );\r\n                                })\r\n                            )}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n\r\n                {/* Dialog Thêm/Sửa Khuyến mãi */}\r\n                <Dialog \r\n                    open={openDialog} \r\n                    onClose={handleCloseDialog} \r\n                    maxWidth=\"md\" \r\n                    fullWidth\r\n                >\r\n                    <DialogTitle>{editingPromotion ? 'Sửa Khuyến mãi' : 'Thêm Khuyến mãi Mới'}</DialogTitle>\r\n                    <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\r\n                        <Tabs value={tabValue} onChange={handleTabChange} aria-label=\"promotion edit tabs\">\r\n                            <Tab label=\"Thông tin cơ bản\" />\r\n                            <Tab label=\"Sản phẩm áp dụng\" />\r\n                            <Tab label=\"Danh mục áp dụng\" />\r\n                        </Tabs>\r\n                    </Box>\r\n                    <DialogContent>\r\n                        <TabPanel value={tabValue} index={0}>\r\n                            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mt: 2 }}>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    label=\"Tiêu đề khuyến mãi\"\r\n                                    name=\"title\"\r\n                                    value={formData.title}\r\n                                    onChange={handleTextFieldChange}\r\n                                    required\r\n                                />\r\n                                <TextField\r\n                                    fullWidth\r\n                                    label=\"Mô tả\"\r\n                                    name=\"description\"\r\n                                    value={formData.description}\r\n                                    onChange={handleTextFieldChange}\r\n                                    multiline\r\n                                    rows={4}\r\n                                />\r\n                                <TextField\r\n                                    fullWidth\r\n                                    label=\"Phần trăm giảm giá\"\r\n                                    name=\"discount_percentage\"\r\n                                    value={formData.discount_percentage}\r\n                                    onChange={handleTextFieldChange}\r\n                                    type=\"number\"\r\n                                    InputProps={{\r\n                                        startAdornment: <InputAdornment position=\"start\"><PercentIcon /></InputAdornment>,\r\n                                    }}\r\n                                    required\r\n                                />\r\n                                <GridContainer>\r\n                                    <GridItemHalf>\r\n                                        <TextField\r\n                                            fullWidth\r\n                                            label=\"Ngày bắt đầu\"\r\n                                            name=\"start_date\"\r\n                                            type=\"datetime-local\"\r\n                                            value={formData.start_date}\r\n                                            onChange={handleDateChange}\r\n                                            InputLabelProps={{\r\n                                                shrink: true,\r\n                                            }}\r\n                                            InputProps={{\r\n                                                startAdornment: <InputAdornment position=\"start\"><DateRangeIcon /></InputAdornment>,\r\n                                            }}\r\n                                            required\r\n                                        />\r\n                                    </GridItemHalf>\r\n                                    <GridItemHalf>\r\n                                        <TextField\r\n                                            fullWidth\r\n                                            label=\"Ngày kết thúc\"\r\n                                            name=\"end_date\"\r\n                                            type=\"datetime-local\"\r\n                                            value={formData.end_date}\r\n                                            onChange={handleDateChange}\r\n                                            InputLabelProps={{\r\n                                                shrink: true,\r\n                                            }}\r\n                                            InputProps={{\r\n                                                startAdornment: <InputAdornment position=\"start\"><DateRangeIcon /></InputAdornment>,\r\n                                            }}\r\n                                            required\r\n                                        />\r\n                                    </GridItemHalf>\r\n                                </GridContainer>\r\n                                <Box sx={{ mt: 2 }}>\r\n                                    <Typography variant=\"subtitle2\" gutterBottom>Ảnh banner</Typography>\r\n                                    \r\n                                    {formData.img_banner ? (\r\n                                        <Box sx={{ position: 'relative', mb: 2 }}>\r\n                                            <img \r\n                                                src={formData.img_banner} \r\n                                                alt=\"Banner Preview\" \r\n                                                style={{ width: '100%', maxHeight: '200px', objectFit: 'contain', border: '1px solid #ddd', borderRadius: '4px' }} \r\n                                            />\r\n                                            <IconButton \r\n                                                sx={{ position: 'absolute', top: 8, right: 8, bgcolor: 'rgba(255,255,255,0.7)' }}\r\n                                                onClick={() => setFormData(prev => ({ ...prev, img_banner: '' }))}\r\n                                            >\r\n                                                <DeleteIcon />\r\n                                            </IconButton>\r\n                                        </Box>\r\n                                    ) : (\r\n                                        <Box \r\n                                            sx={{ \r\n                                                width: '100%', \r\n                                                height: '120px', \r\n                                                border: '1px dashed #ccc', \r\n                                                borderRadius: '4px',\r\n                                                display: 'flex',\r\n                                                flexDirection: 'column',\r\n                                                alignItems: 'center',\r\n                                                justifyContent: 'center',\r\n                                                mb: 2,\r\n                                                bgcolor: 'grey.100'\r\n                                            }}\r\n                                        >\r\n                                            <PhotoIcon sx={{ fontSize: 40, color: 'text.secondary', mb: 1 }} />\r\n                                            <Typography variant=\"body2\" color=\"text.secondary\">Chưa có ảnh banner</Typography>\r\n                                        </Box>\r\n                                    )}\r\n                                    \r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        component=\"label\"\r\n                                        startIcon={uploadingBanner ? <CircularProgress size={24} /> : <CloudUploadIcon />}\r\n                                        disabled={uploadingBanner}\r\n                                        size=\"small\"\r\n                                    >\r\n                                        {formData.img_banner ? 'Thay đổi ảnh banner' : 'Tải ảnh banner lên'}\r\n                                        <input\r\n                                            type=\"file\"\r\n                                            hidden\r\n                                            accept=\"image/*\"\r\n                                            onChange={handleUploadBanner}\r\n                                            disabled={uploadingBanner}\r\n                                        />\r\n                                    </Button>\r\n                                    <FormHelperText>\r\n                                        Ảnh banner sẽ được hiển thị cho khuyến mãi này\r\n                                    </FormHelperText>\r\n                                </Box>\r\n                            </Box>\r\n                        </TabPanel>\r\n                        \r\n                        <TabPanel value={tabValue} index={1}>\r\n                            <Box sx={{ mt: 2 }}>\r\n                                <Typography variant=\"subtitle1\" sx={{ mb: 2, display: 'flex', alignItems: 'center' }}>\r\n                                    <InventoryIcon sx={{ mr: 1 }} />\r\n                                    Sản phẩm áp dụng khuyến mãi\r\n                                </Typography>\r\n                                \r\n                                <FormControl fullWidth>\r\n                                    <InputLabel id=\"products-select-label\">Sản phẩm</InputLabel>\r\n                                    <Select\r\n                                        labelId=\"products-select-label\"\r\n                                        multiple\r\n                                        value={selectedProductIds}\r\n                                        onChange={handleProductSelectionChange}\r\n                                        renderValue={(selected) => (\r\n                                            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n                                                {selected.map((value) => {\r\n                                                    const product = products.find(p => p.product_id === value);\r\n                                                    return (\r\n                                                        <Chip key={value} label={product?.name || value} />\r\n                                                    )\r\n                                                })}\r\n                                            </Box>\r\n                                        )}\r\n                                    >\r\n                                        {products.map((product) => (\r\n                                            <MenuItem key={product.product_id} value={product.product_id}>\r\n                                                <Checkbox checked={selectedProductIds.indexOf(product.product_id) > -1} />\r\n                                                <ListItemText primary={product.name} secondary={`${product.price.toLocaleString('vi-VN')}đ`} />\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                    </Select>\r\n                                    <FormHelperText>\r\n                                        Chọn các sản phẩm sẽ được áp dụng khuyến mãi này\r\n                                    </FormHelperText>\r\n                                </FormControl>\r\n                            </Box>\r\n                        </TabPanel>\r\n                        \r\n                        <TabPanel value={tabValue} index={2}>\r\n                            <Box sx={{ mt: 2 }}>\r\n                                <Typography variant=\"subtitle1\" sx={{ mb: 2, display: 'flex', alignItems: 'center' }}>\r\n                                    <CategoryIcon sx={{ mr: 1 }} />\r\n                                    Danh mục áp dụng khuyến mãi\r\n                                </Typography>\r\n                                \r\n                                <FormControl fullWidth>\r\n                                    <InputLabel id=\"categories-select-label\">Danh mục</InputLabel>\r\n                                    <Select\r\n                                        labelId=\"categories-select-label\"\r\n                                        multiple\r\n                                        value={selectedCategoryIds}\r\n                                        onChange={handleCategorySelectionChange}\r\n                                        renderValue={(selected) => (\r\n                                            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n                                                {selected.map((value) => {\r\n                                                    const category = categories.find(c => c.category_id === value);\r\n                                                    return (\r\n                                                        <Chip key={value} label={category?.name || value} />\r\n                                                    )\r\n                                                })}\r\n                                            </Box>\r\n                                        )}\r\n                                    >\r\n                                        {categories.map((category) => (\r\n                                            <MenuItem key={category.category_id} value={category.category_id}>\r\n                                                <Checkbox checked={selectedCategoryIds.indexOf(category.category_id) > -1} />\r\n                                                <ListItemText primary={category.name} />\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                    </Select>\r\n                                    <FormHelperText>\r\n                                        Chọn các danh mục sẽ được áp dụng khuyến mãi này. Tất cả sản phẩm trong danh mục sẽ được giảm giá.\r\n                                    </FormHelperText>\r\n                                </FormControl>\r\n                            </Box>\r\n                        </TabPanel>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={handleCloseDialog}>Hủy</Button>\r\n                        <Button onClick={handleSubmit} variant=\"contained\">Lưu</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </Box>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default PromotionManagement; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}